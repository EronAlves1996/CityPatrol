# City Patrol

![Logo](./CityPatrolLogo.jfif)

City Patrol is an API designed to get basic statistics about crime in a city. It works simply by:

- Creating a city
- Filling information about the hoods of the city
- Register crimes occurred on them

After that, the API can generate basic analytics by city and by hood.

## Stack

The API was entire generated with Spring Boot, using the modules bellow:

- Spring Web MVC
- Spring Data JPA

## Running the project

You can get some demonstration on your machine by running a test configuration. You should have:

- Docker
- Java 17
- Gradle

```sh
# Clone the project

git clone git@github.com:EronAlves1996/CityPatrol.git

# Navigate in the dir

cd CityPatrol

# Run a test database docker container

docker build -t <yourNickName>/test-database -f Dockerfile.test ./database
docker run -p 3306:3306 <yourNickName>/test-database

# Run you application

cd citypatrolback
./gradlew bootRun

```

After that, you application gonna listen on port 8080.

## Using the api

After running the project, the endpoint descriptions are available on http://localhost:8080/swagger-ui.html.

Basically, the flow are following:

- Create your city by running a POST call into http://localhost:8080/city (id information is not required, its autogenerated);
- Create your hoods by running a POST call into http://localhost:8080/city/{id}/hood (the id information about city is returned by the POST call made previously on /city, the hood id is not required);
- Register the crimes by running POST calls into http//localhost:8080/crime (id information for crime is not required, hood information is required);
- Get analytics for both hood and city using GET calls into http://localhost:8080/city/{id}/analytics and http://localhost:8080/city/{id}/hood/{id}/analytics;

You can use the application right now in the https://citypatrol-production.up.railway.app/ and acessing the complete documentation and demonstration in https://citypatrol-production.up.railway.app/swagger-ui.html.
